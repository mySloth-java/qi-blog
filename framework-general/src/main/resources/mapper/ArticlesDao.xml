<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.cg.mapper.ArticlesDao">

    <!--TODO 分页查询文章 List<Articles> GetArticlesByPage(@Param("pageNum") Integer pageNum,
                                   @Param("pageSize") Integer pageSize);-->
    <select id="GetArticlesByPage" resultType="com.cg.entity.Articles">
        select * from articles
            order by top_flag DESC
            limit #{pageNum},#{pageSize}
    </select>

    <!--TODO 查询所有文章信息 List<Articles> GetArticles();-->
    <select id="GetArticles" resultType="com.cg.entity.Articles">
        select * from articles
    </select>


    <!--查询文章数目 Integer GetArticlesCount();-->
    <select id="GetArticlesCount" resultType="integer">
        select count(content) from articles
    </select>

    <!--TODO 查询文章详情 Articles GetArticleById(@Param("id") Long id);-->
    <select id="GetArticleById" resultType="com.cg.entity.Articles">
        select *
            from articles
        where id = #{id}
    </select>

    <!--查询所有分类id List<Articles> GetCategoryIds();-->
    <select id="GetCategoryIds" resultType="integer">
        select DISTINCT classify_id from articles
    </select>

    <!--添加文章 Integer AddArticle(Articles articles);-->
    <insert id="AddArticle">
        insert into articles
            (title, summarize, content, img,
             create_time, update_time,
             classify_id, user_id)
        values (#{title},#{summarize},#{content},#{img},now(),now(),#{classifyId},#{userId})
    </insert>

</mapper>
